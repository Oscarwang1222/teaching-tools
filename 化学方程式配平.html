<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <script defer src="https://cloud.umami.is/script.js"
        data-website-id="d6ee6da5-3779-4551-a754-7f63fdf95dbb"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>化学方程式配平工具</title>
    <style>
        :root {
            --primary-color: #2A5CAA;
            --secondary-color: #00E5FF;
            --accent-color: #6A00FF;
            --light-color: #010409;
            --dark-color: #ffffff;
            --card-bg: #0d1117;
            --card-border: 1px solid #30363d;
            --card-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            --text-secondary: #8b949e;
            --success-color: #28a745;
            --error-color: #e74c3c;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            color: var(--secondary-color);
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.3);
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1em;
        }

        .content {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            border: var(--card-border);
        }

        .input-section {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-secondary);
        }

        .equation-input {
            width: 100%;
            padding: 15px;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 5px;
            color: var(--dark-color);
            font-size: 1.1em;
            margin-bottom: 10px;
            transition: all 0.3s;
        }

        .equation-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(0, 229, 255, 0.2);
        }

        .examples {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .button-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .balance-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(42, 92, 170, 0.4);
        }

        .balance-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(42, 92, 170, 0.6);
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
            color: var(--secondary-color);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 229, 255, 0.1);
            border-left-color: var(--secondary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .result-section {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: rgba(42, 92, 170, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--secondary-color);
        }

        .result-section h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
        }

        .balanced-equation {
            font-size: 1.5em;
            font-family: 'Courier New', Courier, monospace;
            color: var(--dark-color);
            word-break: break-all;
            line-height: 1.4;
        }

        .error {
            display: none;
            color: var(--error-color);
            background: rgba(231, 76, 60, 0.1);
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            text-align: center;
            border: 1px solid rgba(231, 76, 60, 0.3);
        }

        footer {
            text-align: center;
            margin-top: auto;
            padding-top: 40px;
            color: var(--text-secondary);
            font-size: 0.9em;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>化学方程式配平工具</h1>
            <div class="subtitle">使用AI技术自动配平化学方程式</div>
        </header>

        <div class="content">
            <div class="input-section">
                <label for="equation">输入未配平的化学方程式：</label>
                <input type="text" id="equation" class="equation-input" placeholder="例如: H2 + O2 → H2O">
                <div class="examples">示例: Fe + O2 → Fe2O3, CH4 + O2 → CO2 + H2O, Al + HCl → AlCl3 + H2</div>
            </div>

            <div class="button-container">
                <button id="balanceBtn" class="balance-btn">
                    <span>配平方程式</span>
                </button>
            </div>

            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>正在使用AI配平方程式，请稍候...</p>
            </div>

            <div id="error" class="error">
                发生错误，请检查网络连接或稍后重试。
            </div>

            <div id="resultSection" class="result-section">
                <h3>配平后的方程式：</h3>
                <div id="balancedEquation" class="balanced-equation"></div>
                <div id="explanation"></div>
            </div>
        </div>

        <footer>
            <p>本工具使用DeepSeek API进行化学方程式配平 | 仅供教育用途</p>
        </footer>
    </div>

    <script>
        // 请在这里填入您的Base64编码的API密钥
        // 格式: const encodedApiKey = "您的基础64编码API密钥";
        const encodedApiKey = "c2stYzgyOWZmN2VjYjliNDFjMTlkMjZhYzVlNmViNzBhYzU=";

        document.addEventListener('DOMContentLoaded', function () {
            const equationInput = document.getElementById('equation');
            const balanceBtn = document.getElementById('balanceBtn');
            const loading = document.getElementById('loading');
            const resultSection = document.getElementById('resultSection');
            const balancedEquation = document.getElementById('balancedEquation');
            const errorDiv = document.getElementById('error');
            const explanation = document.getElementById('explanation');

            // 示例方程式
            const examples = [
                "H2 + O2 → H2O",
                "Fe + O2 → Fe2O3",
                "CH4 + O2 → CO2 + H2O"
            ];

            // 随机显示一个示例
            equationInput.placeholder = `例如: ${examples[Math.floor(Math.random() * examples.length)]}`;

            balanceBtn.addEventListener('click', function () {
                const equation = equationInput.value.trim();

                if (!equation) {
                    showError("请输入一个化学方程式");
                    return;
                }

                // 验证是否为有效的化学方程式格式
                if (!isValidEquation(equation)) {
                    showError("请输入有效的化学方程式格式，例如: H2 + O2 → H2O");
                    return;
                }

                // 显示加载状态
                loading.style.display = 'block';
                resultSection.style.display = 'none';
                errorDiv.style.display = 'none';

                // 调用API
                callDeepSeekAPI(equation);
            });

            function isValidEquation(equation) {
                // 简单的验证：检查是否包含箭头和化学式
                return equation.includes('→') || equation.includes('->') ||
                    equation.includes('=') &&
                    /[A-Za-z]/.test(equation) && /\d/.test(equation);
            }

            function callDeepSeekAPI(equation) {
                // 解码API密钥
                let apiKey;
                try {
                    if (encodedApiKey === "在此处填入您的基础64编码API密钥") {
                        throw new Error("请先设置API密钥");
                    }
                    apiKey = atob(encodedApiKey);
                } catch (e) {
                    showError("API密钥配置错误: " + e.message);
                    return;
                }

                // 准备请求数据
                const requestData = {
                    model: "deepseek-chat",
                    messages: [
                        {
                            role: "system",
                            content: "你是化学专家，专门配平化学方程式。请直接返回配平后的方程式，不要添加任何额外文本，只返回最终结果。"
                        },
                        {
                            role: "user",
                            content: `请配平以下化学方程式: ${equation}`
                        }
                    ],
                    temperature: 0.3,
                    max_tokens: 150
                };

                // 发送API请求
                fetch('https://api.deepseek.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify(requestData)
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`API请求失败: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        // 隐藏加载状态
                        loading.style.display = 'none';

                        if (data.choices && data.choices.length > 0) {
                            const balancedEq = data.choices[0].message.content.trim();
                            displayResult(balancedEq);
                        } else {
                            throw new Error("API返回的数据格式不正确");
                        }
                    })
                    .catch(error => {
                        loading.style.display = 'none';
                        showError("配平失败: " + error.message);
                    });
            }

            function displayResult(balancedEquationText) {
                balancedEquation.textContent = balancedEquationText;
                resultSection.style.display = 'block';

                // 滚动到结果区域
                resultSection.scrollIntoView({ behavior: 'smooth' });
            }

            function showError(message) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
                loading.style.display = 'none';
                resultSection.style.display = 'none';
            }

            // 允许按Enter键提交
            equationInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    balanceBtn.click();
                }
            });
        });
    </script>
</body>

</html>